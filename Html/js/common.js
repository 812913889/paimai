/*!
 * M.YS.COM v0.0.0
 * Copyright 2015
 * Author burning <iburning@live.cn>
 */
function setImageCenter(a,b){var c=a.data("width"),d=a.data("height");if(!c){var e=a.data("original");if(e||(e=a.attr("src")),!e)return;if(e.indexOf("-")>0){var f=/-[\s\S]*./,g=f.exec(e);if(g){g=g[0].replace("-",""),g=g.split(".")[0];var h=g.split("x");c=h[0],d=h[1]}}}new ImageCenter({image:a,sizeType:"cover",canZoomIn:!0,width:c,height:d,maxWidth:b,maxHeight:b})}function initCountdown(a,b){if(window._countdownLoop||(window._countdownLoop=new Loop({delay:1e3}),_countdownLoop.play()),a.length>0){var c=window._nowTime||(new Date).valueOf();9999999999>=c&&(c*=1e3),_countdownLoop.addAction("countdown_"+c,function(b){c+=b.delay;for(var d=0;d<a.length;d++){var e=$(a[d]),f=e.data("endtime");9999999999>=f&&(f*=1e3);var g=f-c;g>=0?e.html(utils.time2String(g)):(e.parent().removeClass("time"),e.parent().addClass("time-over"),e.parent().html("<span>已结束</span>"))}})}}function initImageLazy(a,b){try{a.lazyload({effect:"fadeIn",load:b})}catch(c){console.error(c)}}function initImageCenter(a){for(var b=0;b<a.length;b++){var c=$(a[b]),d=c.outerWidth();c.css("height",d),setImageCenter(c.find("img"),d)}}function initCollection(a){for(var b=[],c=[],d=0;d<a.length;d++){var e=$(a[d]);2400===e.data("collect")?b.push(e.data("id")):2401===e.data("collect")&&c.push(e.data("id"))}b.length&&utils.checkCollect(2400,b,function(a){var b=a.value.list;if(b)for(var c=0;c<b.length;c++){var d=$('[data-collect="2400"][data-id="'+b[c].id+'"]');b[c].isCollected?(d.addClass("collected"),d.find("span").html(d.data("text-collected")||"已收藏")):(d.removeClass("collected"),d.find("span").html(d.data("text-collect")||"收藏拍品"))}}),c.length&&utils.checkCollect(2401,c,function(a){var b=a.value.list;if(b)for(var c=0;c<b.length;c++){var d=$('[data-collect="2401"][data-id="'+b[c].id+'"]');b[c].isCollected?(d.addClass("collected"),d.find("span").html(d.data("text-collected")||"已收藏")):(d.removeClass("collected"),d.find("span").html(d.data("text-collect")||"收藏店铺"))}})}var ImageCenter=function(a){var b=this;b.DEFAULT={image:null,sizeType:"noraml",canZoomIn:!1,width:100,height:100,maxWidth:100,maxHeight:100},b.init(a)};ImageCenter.prototype.init=function(a){var b=this;$.extend(b,b.DEFAULT,a||{}),b.image.css({display:"block","max-width":"none"});var c=b.width/b.height,d=b.width,e=b.height;c>=1?"contain"==b.sizeType?(b.maxWidth>b.width?b.canZoomIn&&(d=b.maxWidth):d=b.maxWidth,e=parseInt(d/c)):"cover"==b.sizeType&&(b.maxHeight>b.height?b.canZoomIn&&(e=b.maxHeight):e=b.maxHeight,d=parseInt(e*c)):"contain"==b.sizeType?(b.maxHeight>b.height?b.canZoomIn&&(e=b.maxHeight):e=b.maxHeight,d=parseInt(e*c)):"cover"==b.sizeType&&(b.maxWidth>b.width?b.canZoomIn&&(d=b.maxWidth):d=b.maxWidth,e=parseInt(d/c));var f=parseInt((b.maxWidth-d)/2),g=parseInt((b.maxHeight-e)/2);b.image.css({width:d,height:e,"margin-left":f,"margin-right":f,"margin-top":g,"margin-bottom":g})};var UserAgent={info:navigator.userAgent,is:function(a){var b=this;"WeChat"==a&&(a="MicroMessenger"),a=a.toLowerCase();var c=new RegExp(a,"i");return b.info.toLowerCase().match(c)==a?!0:!1},isAndroid:function(){return this.is("Android")},isIOS:function(){return this.is("OS")},isXiaoMi:function(){return this.is("MI ")},isWeChat:function(){return this.is("WeChat")},isYSApp:function(){return this.is("YSApp")}},YS={};YS.Utils={showMask:function(a){var b={isShowLoading:!1};a=$.extend({},b,a||{});var c=$("body"),d=$("#ys-page-mask");0==d.length&&(d=$('<div class="ys-mask" id="ys-page-mask">'),c.append(d)),a.isShowLoading&&d.addClass("ys-mask-loading")},hideMask:function(){var a=$("#ys-page-mask");a.remove()},showLoading:function(a){var b={title:""};a=$.extend({},b,a||{});var c=$("body"),d='<div class="am-modal am-modal-loading am-modal-no-btn" tabindex="-1" id="my-loading">                <div class="am-modal-dialog">                    <div class="am-modal-hd">正在载入...</div>                    <div class="am-modal-bd">                      <span class="am-icon-spinner am-icon-spin"></span>                    </div>                </div>            </div>',e=$("#my-loading");0===e.length&&(e=$(d),e.appendTo(c)),$hd=e.find(".am-modal-hd"),$hd.html(a.title),e.modal({closeViaDimmer:!1})},hideLoading:function(){var a=$("#my-loading");a.length&&a.modal("close")},showAlert:function(a){var b={title:"",content:"",btnText:"确定",onButtonClick:null};a=$.extend({},b,a||{});var c=$("body"),d='<div class="am-modal am-modal-alert" tabindex="-1" id="my-alert">                <div class="am-modal-dialog">                    <div class="am-modal-hd"></div>                    <div class="am-modal-bd"></div>                    <div class="am-modal-footer">                        <span class="am-modal-btn">确定</span>                    </div>                </div>            </div>',e=$("#my-alert");0===e.length&&(e=$(d),e.appendTo(c)),$hd=e.find(".am-modal-hd"),$bd=e.find(".am-modal-bd"),$btn=e.find(".am-modal-btn"),$hd.html(a.title),$bd.html("").append(a.content),$btn.html(a.btnText),$btn.on("click",function(b){"function"==typeof a.onButtonClick&&a.onButtonClick()}),e.modal({relatedElement:this})},hideAlert:function(){var a=$("#my-alert");a.length&&a.modal("close")},showConfirm:function(a){var b={title:"",content:"",btnCancelText:"取消",btnConfirmText:"确定",onCancel:null,onConfirm:null};a=$.extend({},b,a||{});var c=$("body"),d='<div class="am-modal am-modal-confirm" tabindex="-1" id="my-confirm">                <div class="am-modal-dialog">                    <div class="am-modal-hd">Amaze UI</div>                    <div class="am-modal-bd"></div>                    <div class="am-modal-footer">                        <span class="am-modal-btn btn-cancel" data-am-modal-cancel>取消</span>                        <span class="am-modal-btn btn-confirm" data-am-modal-confirm>确定</span>                    </div>                </div>            </div>',e=$("#my-confirm");0===e.length?(e=$(d),e.appendTo(c)):(e.remove(),e=$(d),e.appendTo(c)),$hd=e.find(".am-modal-hd"),$bd=e.find(".am-modal-bd"),$btnCancel=e.find(".btn-cancel"),$btnConfirm=e.find(".btn-confirm"),$hd.html(a.title),$bd.html("").append(a.content),$btnCancel.html(a.btnCancelText),$btnConfirm.html(a.btnConfirmText),$btnCancel.off("click.cancel.modal.amui").one("click",function(){"function"==typeof a.onCancel&&a.onCancel()}),$btnConfirm.off("click.confirm.modal.amui").one("click",function(){"function"==typeof a.onConfirm&&a.onConfirm()}),e.modal({closeViaDimmer:!1})},showPopup:function(a){var b={title:"",content:"",iframeUrl:"",closeViaDimmer:!0,width:0,height:0,onClose:null};a=$.extend({},b,a||{});var c=$("body"),d='<div class="am-popup" id="my-popup">                <div class="am-popup-inner">                    <div class="am-popup-hd">                        <h4 class="am-popup-title"></h4>                        <span data-am-modal-close class="am-close">&times;</span>                    </div>                    <div class="am-popup-bd"></div>                </div>            </div>',e=a.content,f=$("#my-popup");0===f.length&&(f=$(d),f.appendTo(c)),a.width&&f.css({width:a.width,left:"50%","margin-left":-parseInt(a.width/2)}),a.height&&f.css({height:a.height,top:"40%","margin-top":-parseInt(a.height/2)}),$title=f.find(".am-popup-title"),$bd=f.find(".am-popup-bd"),$title.html(a.title),a.iframeUrl?(e=$('<iframe src="'+a.iframeUrl+'" width="100%" height="100%" frameborder="0"></iframe>'),f.addClass("popup-iframe"),$bd.css("height",window.innerHeight-42)):f.removeClass("popup-iframe"),$bd.html("").append(e),f.modal({closeViaDimmer:a.closeViaDimmer}),f.modal("open"),f.on("close.modal.amui",function(b){console.log("close.modal.amui",typeof a.onClose,b),"function"==typeof a.onClose&&a.onClose()})},hidePopup:function(){var a=$("#my-popup");a.length&&a.modal("close")},showShare:function(a){var b={title:"拍卖神器",content:"",pics:"",url:location.href};a=$.extend({},b,a||{});var c=$("body"),d='<div class="am-modal-actions modal-actions-top" id="ys-share">                <div class="am-modal-actions-group">                    <div class="title">微信相关分享请猛戳右上角</div>                    <ul class="list">                        <li><a href="javascript:;" data-share-to="weibo">                            <img src="http://static.ys.com/m/img/share/Share_Webo.png" alt="新浪微博" />新浪微博                        </a></li>                        <li><a href="javascript:;" data-share-to="qqSpace">                            <img src="http://static.ys.com/m/img/share/Share_Space.png" alt="QQ空间" />QQ空间                        </a></li>                        <li><a href="javascript:;" data-share-to="link">                            <img src="http://static.ys.com/m/img/share/Share_Link.png" alt="复制链接" />复制链接                        </a></li>                        <li><a href="javascript:;" data-share-to="code">                            <img src="http://static.ys.com/m/img/share/Share_Code.png" alt="二维码" />二维码                        </a></li>                    </ul>                </div>            </div>',e=$("#ys-share");e.length&&e.remove(),e=$(d),e.appendTo(c);for(var f=e.find("[data-share-to]"),g=0;g<f.length;g++){var h=$(f[g]),i=h.data("share-to");if("link"==i)h.on("click",function(a){utils.showAlert({content:"您当前的浏览器无法复制,请选择其它分享方式"})});else if("code"==i)h.on("click",function(b){var c=encodeURIComponent(a.url),d='<img src="'+window._qrApi+"?text="+c+'" />';utils.showAlert({title:"邀好友扫一扫",content:d,btnText:"取消",onButtonClick:function(){utils.hideShare()}})});else{var j=utils.getShareUrl(i,a);h.attr("target","_blank"),h.attr("href",j)}}e.modal("open")},hideShare:function(){var a=$("#ys-share");a.modal("close")},showShareTip:function(){var a=$("body"),b='<div class="am-modal-actions modal-actions-top" id="ys-share-tip">                <div class="am-modal-actions-group" data-am-modal-close>                    <div class="title">微信相关分享请猛戳右上角</div>                </div>            </div>',c=$("#ys-share-tip");c.length&&c.remove(),c=$(b),c.appendTo(a),c.modal("open")},hideShareTip:function(){var a=$("#ys-share-tip");a.modal("close")},strong2Json:function(a,b,c){b=b||"|",c=c||":";var d={};if(a)for(var e=a.split(b),f=0;f<e.length;f++){var g=e[f].split(c);d[$.trim(g[0])]=$.trim(g[1])}return d},array2Json:function(a,b){b=b||"=";for(var c={},d=0;d<a.length;d++){var e=a[d].split(b);c[$.trim(e[0])]=$.trim(e[1])}return c},ajax:function(a){a.type=a.type||"POST",a.dataType=a.dataType||"json",("undefined"==typeof a.async||"boolean"==typeof a.async)&&(a.async=a.async||!0),("undefined"==typeof a.cache||"boolean"==typeof a.cache)&&(a.cache=a.cache||!1),$.ajax({type:a.type,url:a.url,data:a.data,dataType:a.dataType,cache:a.cache,async:a.async,success:function(b){"function"==typeof a.success&&a.success(b)},error:function(b){"function"==typeof a.error&&a.error(b)}})},collect:function(a,b,c){var d=this,e=window._collectApi;return e?void d.ajax({type:"post",url:e,data:{type:a,id:b},success:function(a){if("-1001"===a.resultCode){var b=window._loginUrl||"/login";b+=b.indexOf("?")?"&":"?",b+="backUrl="+encodeURIComponent(window.location.href),utils.goUrl(b)}else 1===a.resultCode&&"function"==typeof c&&c(a)},error:function(a){d.showAlert({title:"提示",content:a.status+"-"+a.statusText})}}):void console.error("_collectApi undefined")},uncollect:function(a,b,c){var d=this,e=window._uncollectApi;return e?void d.ajax({type:"post",url:e,data:{type:a,id:b},success:function(a){if("-1001"===a.resultCode){var b=window._loginUrl||"/login";b+=b.indexOf("?")?"&":"?",b+="backUrl="+encodeURIComponent(window.location.href),utils.goUrl(b)}else 1===a.resultCode&&"function"==typeof c&&c(a)},error:function(a){d.showAlert({title:"提示",content:a.status+"-"+a.statusText})}}):void console.error("_uncollectApi undefined")},checkCollect:function(a,b,c){var d=this,e=window._checkCollectApi;return e?void d.ajax({type:"post",url:e,data:{type:a,id:b},success:function(a){1===a.resultCode&&"function"==typeof c&&c(a)},error:function(a){console.error(a)}}):void console.error("_checkCollectApi undefined")},location:{query:function(){var a=window.location.search,b={};if(a)for(var c=a.replace("?","").split("&"),d=0;d<c.length;d++){var e=c[d].split("=");b[e[0]]=e[1]}return b}},goUrl:function(a){var b=this;a&&(b.showMask({isShowLoading:!0}),window.location.href=a)},time2String:function(a,b){b=b;var c=1e3,d=60*c,e=60*d,f=24*e,g=Math.floor(a/f),h=a%f,i=Math.floor(h/e),j=h%e,k=Math.floor(j/d),l=j%d,m=Math.floor(l/c);i=10>i?"0"+i:i,k=10>k?"0"+k:k,m=10>m?"0"+m:m;var n="";return"cn"===b?g>0?n="<em>"+g+"</em>天 ":n+="<em>"+i+"</em>时<em>"+k+"</em>分<em>"+m+"</em>秒":"en"===b?g>0?n="<em>"+g+"</em>day(s) ":n+="<em>"+i+"</em>:<em>"+k+"</em>:<em>"+m+"</em>":g>0?n="<em>"+g+"</em>天 ":n+="<em>"+i+"</em>:<em>"+k+"</em>:<em>"+m+"</em>",n},dateFormat:function(a,b){if(null==a)return!1;"string"==typeof a&&(a=new Date(a.replace(/-/g,"/"))),"number"==typeof a&&(9999999999>=a&&(a*=1e3),a=new Date(a)),b||(b="yyyy-MM-dd hh:mm:ss");var c={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),S:a.getMilliseconds()};/(y+)/.test(b)&&(b=b.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length)));for(var d in c)new RegExp("("+d+")").test(b)&&(b=b.replace(RegExp.$1,1==RegExp.$1.length?c[d]:("00"+c[d]).substr((""+c[d]).length)));return b},moneyFormat:function(a,b){if(a=a.toString(),isNaN(a)||""==a)return"";var c=new RegExp("([0-9])([0-9][0-9][0-9][,.])"),d=a.split(".");d[0]+=".";do d[0]=d[0].replace(c,"$1,$2");while(c.test(d[0]));var e="";return e=d.length>1?d.join(""):d[0].split(".")[0],b?e:"<em>&yan;</em><num>"+e+"</num>"},log:function(a){var b=location.hostname;(b.indexOf("debug")||b.indexOf("localhost"))&&window.console&&console.log(a)},checkLogin:function(a,b){"function"==typeof a&&a()}},YS.Utils.getShareUrl=function(a,b){var c={title:"拍卖神器",content:"",pics:"",url:window.location.href};b=$.extend({},c,b||{});for(key in b)"string"==typeof b[key]&&(b[key]=encodeURIComponent(b[key]));b.pics=b.pics.split("|");var d="";switch(a){case"weibo":d="http://service.weibo.com/share/share.php?url="+b.url+"&title="+b.title+"&appkey=1343713053&pic="+b.pics[0]+"&searchPic=false";break;case"qq":d="http://share.v.t.qq.com/index.php?c=share&a=index&url="+b.url+"&title="+b.title+"&desc="+b.content+"appkey=801cf76d3cfc44ada52ec13114e84a96&pic="+b.pics[0];break;case"163":d="http://t.163.com/article/user/checkLogin.do?info="+b.title+"-"+b.url+"&source=艺商微店&images="+b.pics[0]+"&togImg=false";break;case"sohu":d="http://t.sohu.com/third/post.jsp?url="+b.url+"&title="+b.title+"&pic="+b.pics[0];break;case"qqFriends":d="http://connect.qq.com/widget/shareqq/index.html?url="+b.url+"&title="+b.title+"&desc=&summary="+b.content+"&site=ys&pics="+b.pics[0];break;case"qqSpace":var d="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url="+b.url+"&title="+b.title+"&desc=&summary="+b.content+"&site=ys&pics="+b.pics[0]}return d};var utils=YS.Utils;YS.Form=function(a){var b=this;b.DEFUATL={form:null,submitButton:null,method:"",apiUrl:"",goUrl:"",beforeSubmit:null,successHandler:function(a,b){1==a.resultCode?utils.goUrl(a.goUrl||b):utils.showAlert({content:a.resultMessage})}},a&&b.init(a)},YS.Form.prototype.init=function(a){var b=this;$.extend(b,b.DEFUATL,a||{}),b.method=b.method||b.form.attr("method"),b.method=b.method||"post",b.apiUrl=b.apiUrl||b.form.attr("action"),b.goUrl=b.goUrl||b.form.find('[name="goUrl"]').val(),b.goUrl=b.goUrl||"",b.submitButton=b.form.find(".btn-submit").eq(0),b._bindEvent()},YS.Form.prototype._bindEvent=function(){var a=this;a.form.on("submit",function(b){b.preventDefault();var c=a.form.serializeObject();return"function"!=typeof a.beforeSubmit||a.beforeSubmit(c)?(a._lockButton(),utils.showMask({isShowLoading:!0}),void $.ajax({type:a.method,url:a.apiUrl,data:c,success:function(b){a._unlockButton(),utils.hideMask(),"function"==typeof a.successHandler&&a.successHandler(b,a.goUrl)},error:function(b){a._unlockButton(),utils.hideMask(),"function"==typeof a.errorHandler?a.errorHandler(b):utils.showAlert({title:"提示",content:b.status+" "+b.statusText})}})):!1})},YS.Form.prototype._lockButton=function(){var a=this;a.submitButton.attr("disabled","disabled"),a.submitButton.addClass("loading")},YS.Form.prototype._unlockButton=function(){var a=this;a.submitButton.removeAttr("disabled"),a.submitButton.removeClass("loading")};var Loop=function(a){var b=this;b.DEFAULT={timer:null,actions:{},delay:1e3/30,isPlaying:!1},b.init(a)};Loop.prototype.init=function(a){var b=this;$.extend(b,b.DEFAULT,a||{})},Loop.prototype.play=function(){var a=this;a.isPlaying=!0,a.timer=window.setInterval(function(){for(name in a.actions){var b=a.actions[name];"function"==typeof b&&b(a)}},a.delay)},Loop.prototype.pause=function(){var a=this;a.stop()},Loop.prototype.replay=function(){var a=this;a.play()},Loop.prototype.stop=function(){var a=this;a.isPlaying=!1,window.clearInterval(a.timer)},Loop.prototype.addAction=function(a,b){var c=this;"function"==typeof b&&(c.actions[a]=b)},Loop.prototype.removeAction=function(a){var b=this;delete b.actions[a]};